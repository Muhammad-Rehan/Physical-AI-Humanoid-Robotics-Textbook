"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[6498],{1501:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module3-isaac/path-planning-nav2","title":"Path Planning for Bipedal Humanoids with Nav2","description":"Path planning for bipedal humanoid robots presents unique challenges compared to wheeled or tracked robots. Humanoids must maintain balance, consider foot placement, and navigate complex environments with their distinct kinematics. Integrating these considerations with a powerful navigation framework like Nav2 requires careful adaptation and specialized approaches.","source":"@site/docs/module3-isaac/path-planning-nav2.md","sourceDirName":"module3-isaac","slug":"/module3-isaac/path-planning-nav2","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module3-isaac/path-planning-nav2","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module3-isaac/path-planning-nav2.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Hardware-accelerated VSLAM and Navigation","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module3-isaac/vslam-navigation"},"next":{"title":"Voice-to-Action using OpenAI Whisper","permalink":"/Physical-AI-Humanoid-Robotics-Textbook/docs/module4-vla/voice-to-action"}}');var a=o(4848),t=o(8453);const s={},r="Path Planning for Bipedal Humanoids with Nav2",l={},c=[{value:"3.1 Challenges in Bipedal Humanoid Navigation",id:"31-challenges-in-bipedal-humanoid-navigation",level:2},{value:"Complex kinematics and dynamics",id:"complex-kinematics-and-dynamics",level:3},{value:"Balance and stability",id:"balance-and-stability",level:3},{value:"Footstep planning vs. continuous motion planning",id:"footstep-planning-vs-continuous-motion-planning",level:3},{value:"3.2 Adapting Nav2 for Bipedal Locomotion (Concepts)",id:"32-adapting-nav2-for-bipedal-locomotion-concepts",level:2},{value:"Custom local planners (e.g., <code>teb_local_planner</code> or <code>mpc_local_planner</code> considerations)",id:"custom-local-planners-eg-teb_local_planner-or-mpc_local_planner-considerations",level:3},{value:"Costmap configuration for terrain awareness and balance",id:"costmap-configuration-for-terrain-awareness-and-balance",level:3},{value:"State estimation for bipedal robots",id:"state-estimation-for-bipedal-robots",level:3},{value:"3.3 Integration with Whole-Body Control",id:"33-integration-with-whole-body-control",level:2},{value:"How Nav2 outputs (e.g., velocity commands, waypoints) are translated into whole-body joint commands for humanoids",id:"how-nav2-outputs-eg-velocity-commands-waypoints-are-translated-into-whole-body-joint-commands-for-humanoids",level:3},{value:"Concept of inverse kinematics and dynamics for bipedal motion",id:"concept-of-inverse-kinematics-and-dynamics-for-bipedal-motion",level:3},{value:"Using <code>moveit2</code> or custom controllers for humanoid manipulation and locomotion",id:"using-moveit2-or-custom-controllers-for-humanoid-manipulation-and-locomotion",level:3}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"path-planning-for-bipedal-humanoids-with-nav2",children:"Path Planning for Bipedal Humanoids with Nav2"})}),"\n",(0,a.jsx)(e.p,{children:"Path planning for bipedal humanoid robots presents unique challenges compared to wheeled or tracked robots. Humanoids must maintain balance, consider foot placement, and navigate complex environments with their distinct kinematics. Integrating these considerations with a powerful navigation framework like Nav2 requires careful adaptation and specialized approaches."}),"\n",(0,a.jsx)(e.h2,{id:"31-challenges-in-bipedal-humanoid-navigation",children:"3.1 Challenges in Bipedal Humanoid Navigation"}),"\n",(0,a.jsx)(e.h3,{id:"complex-kinematics-and-dynamics",children:"Complex kinematics and dynamics"}),"\n",(0,a.jsx)(e.p,{children:"Bipedal robots have many degrees of freedom (DoF) and a highly complex kinematic and dynamic structure."}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"High DoF:"})," A typical humanoid robot can have 20-40+ DoF, making inverse kinematics and dynamics calculations computationally intensive."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Non-holonomic and Underactuated:"})," Humanoids are inherently non-holonomic (cannot move freely in all directions simultaneously) and often underactuated (fewer actuators than DoF), especially concerning balance."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Zero Moment Point (ZMP) and Center of Mass (CoM):"})," Maintaining stability requires careful control of the robot's ZMP within its support polygon (formed by the feet on the ground) and managing the trajectory of its Center of Mass."]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"balance-and-stability",children:"Balance and stability"}),"\n",(0,a.jsx)(e.p,{children:"The most critical challenge for bipedal locomotion is maintaining balance and stability."}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Dynamic Balance:"})," Unlike static balance, dynamic balance involves continuously shifting the robot's weight and adjusting joint angles to prevent falls during walking, running, or complex maneuvers."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"External Disturbances:"})," Humanoids must be robust to external pushes, uneven terrain, and slippery surfaces, which can easily destabilize them."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Energy Efficiency:"})," Walking gaits need to be energy-efficient to allow for longer operation times."]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"footstep-planning-vs-continuous-motion-planning",children:"Footstep planning vs. continuous motion planning"}),"\n",(0,a.jsx)(e.p,{children:"Navigation for humanoids often involves two distinct approaches:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Footstep Planning:"})," Generates a sequence of discrete foot placements (waypoints for the feet) that the robot will follow. This is common for walking over uneven terrain, stairs, or stepping stones."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Continuous Motion Planning:"})," Plans a continuous trajectory for the robot's base or CoM, often combined with a whole-body controller that translates this into joint commands while ensuring balance. This is more common for smoother walking on flat ground."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Hybrid Approaches:"})," Modern approaches often combine these, using footstep planning for high-level decisions and continuous planning for smooth transitions and obstacle avoidance within each step."]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"32-adapting-nav2-for-bipedal-locomotion-concepts",children:"3.2 Adapting Nav2 for Bipedal Locomotion (Concepts)"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.a,{href:"pathname:///docs/module3-isaac/vslam-navigation",children:"Nav2"})," provides a highly modular and configurable framework that can be adapted for various robot types. For humanoids, this involves specializing certain components and integrating external balance controllers."]}),"\n",(0,a.jsxs)(e.h3,{id:"custom-local-planners-eg-teb_local_planner-or-mpc_local_planner-considerations",children:["Custom local planners (e.g., ",(0,a.jsx)(e.code,{children:"teb_local_planner"})," or ",(0,a.jsx)(e.code,{children:"mpc_local_planner"})," considerations)"]}),"\n",(0,a.jsx)(e.p,{children:"The default Nav2 local planners (e.g., DWB, TEB) are typically optimized for wheeled robots. For humanoids, specialized local planners are needed:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Trajectory-based Local Planners (like TEB - Timed Elastic Band):"})," Can be adapted, but need to incorporate constraints related to foot placement, swing leg trajectories, and balance. The cost function would need to penalize unstable states or impossible foot placements."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Model Predictive Control (MPC) based Local Planners:"})," MPC is well-suited for dynamic systems like humanoids. It can predict future states and optimize control inputs (joint torques or positions) over a receding horizon to achieve goals while satisfying constraints (balance, joint limits)."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Integration with Whole-Body Controllers:"})," The local planner might output a desired base velocity or a sequence of footsteps, which then needs to be fed into a whole-body controller that generates the actual joint commands."]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"costmap-configuration-for-terrain-awareness-and-balance",children:"Costmap configuration for terrain awareness and balance"}),"\n",(0,a.jsx)(e.p,{children:"Nav2's costmaps are essential for local obstacle avoidance and path validity. For humanoids, costmaps need to be more sophisticated:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"3D Costmaps/Voxel Grids:"})," Traditional 2D costmaps are insufficient for bipedal robots that can step over obstacles or navigate uneven terrain. 3D costmaps (voxel grids) provide richer information about the environment, including traversability, step heights, and potential footholds."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Balance-Aware Cost Layers:"})," Custom costmap layers could be developed to incorporate balance considerations. For example, penalizing areas where the robot's ZMP would fall outside its support polygon or where footholds are too small."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Dynamic Obstacle Avoidance:"})," Humanoids are generally slower and less agile than wheeled robots, making dynamic obstacle avoidance more challenging. The local planner needs to be highly reactive and integrated with fast perception."]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"state-estimation-for-bipedal-robots",children:"State estimation for bipedal robots"}),"\n",(0,a.jsx)(e.p,{children:"Accurate state estimation (knowing the robot's position, orientation, and joint states) is paramount for bipedal robots."}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Multi-sensor Fusion:"})," IMUs, proprioceptive sensors (joint encoders), force-torque sensors in feet, and vision sensors (cameras, LiDAR) must be fused to get a robust estimate."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Kalman Filters/Extended Kalman Filters (EKF):"})," Common for fusing IMU and kinematic data."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Complementary Filters:"})," For combining high-frequency IMU data with slower, more accurate visual or odometry data."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Leg Odometry:"})," Estimating robot motion based on foot contacts and kinematics, especially when visual cues are poor."]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"33-integration-with-whole-body-control",children:"3.3 Integration with Whole-Body Control"}),"\n",(0,a.jsx)(e.p,{children:"The output of Nav2's global and local planners typically consists of either a sequence of waypoints for the robot's base or velocity commands. For a humanoid, this needs to be translated into specific joint trajectories that ensure stable and safe locomotion."}),"\n",(0,a.jsx)(e.h3,{id:"how-nav2-outputs-eg-velocity-commands-waypoints-are-translated-into-whole-body-joint-commands-for-humanoids",children:"How Nav2 outputs (e.g., velocity commands, waypoints) are translated into whole-body joint commands for humanoids"}),"\n",(0,a.jsxs)(e.p,{children:["This translation is performed by a ",(0,a.jsx)(e.strong,{children:"Whole-Body Controller (WBC)"}),". The WBC's role is to solve for the optimal joint commands (positions, velocities, or torques) that will achieve the desired motion of the robot's base while simultaneously satisfying constraints such as:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Balance Constraints:"})," Keeping the ZMP within the support polygon, controlling CoM trajectory."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Joint Limits:"})," Ensuring joints do not exceed their physical range."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Self-Collision Avoidance:"})," Preventing the robot from colliding with itself."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Contact Constraints:"})," Managing forces at the contact points (feet on the ground)."]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"This is often an optimization problem, minimizing tracking errors while respecting all constraints."}),"\n",(0,a.jsx)(e.h3,{id:"concept-of-inverse-kinematics-and-dynamics-for-bipedal-motion",children:"Concept of inverse kinematics and dynamics for bipedal motion"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Inverse Kinematics (IK):"})," Given a desired end-effector pose (e.g., foot position, hand position) or base pose, IK calculates the corresponding joint angles required to achieve that pose. For humanoids, IK is used extensively to determine joint angles for desired foot placements and torso orientation."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Inverse Dynamics (ID):"})," Given desired joint accelerations (or end-effector forces/accelerations), ID calculates the joint torques required to achieve those accelerations. ID is critical for generating dynamic and stable motions, especially in force control or impedance control schemes."]}),"\n"]}),"\n",(0,a.jsxs)(e.h3,{id:"using-moveit2-or-custom-controllers-for-humanoid-manipulation-and-locomotion",children:["Using ",(0,a.jsx)(e.code,{children:"moveit2"})," or custom controllers for humanoid manipulation and locomotion"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsxs)(e.strong,{children:[(0,a.jsx)(e.code,{children:"MoveIt 2"}),":"]})," While traditionally used for manipulators, ",(0,a.jsx)(e.code,{children:"MoveIt 2"})," can be extended for whole-body motion planning of humanoids. It integrates well with ",(0,a.jsx)(e.a,{href:"pathname:///docs/module1-ros2/introduction",children:"ROS 2"}),". It provides tools for:","\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Kinematics Solvers:"})," Integrating custom IK/FK solvers for humanoids."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Motion Planning:"})," Using various planners (e.g., OMPL) to find collision-free paths."]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Control Integration:"})," Connecting planned trajectories to hardware controllers."]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Custom Controllers:"})," For highly specialized or dynamically aggressive gaits, custom low-level controllers written in C++ or Python are often developed. These might implement specific walking pattern generators, balance controllers (e.g., based on model predictive control), or compliance controllers for robust interaction with the environment."]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Integrating Nav2 with such sophisticated whole-body controllers and state estimators is key to enabling robust and agile autonomous navigation for bipedal humanoid robots."})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},8453:(n,e,o)=>{o.d(e,{R:()=>s,x:()=>r});var i=o(6540);const a={},t=i.createContext(a);function s(n){const e=i.useContext(t);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:s(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);